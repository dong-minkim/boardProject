<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.spring.boardapp.dao.BoardDao">
	<insert id="insertBoard" parameterType="java.util.HashMap">
		INSERT INTO board(
			title,
			content,
			writer,
			views
		)
		values(
			#{title},
			#{content},
			#{writer},
			0
		)
	</insert>
	<select id="selectBoard" parameterType="String" resultType="Board">
        SELECT id,
               title,
               content, 
               writer,
               views,
               date_format(regist_datetime, '%Y-%m-%d %H:%i:%s') regist_datetime,
               date_format(modify_datetime, '%Y-%m-%d %H:%i:%s') modify_datetime
        FROM board
        WHERE id = #{id}
    </select>
    <update id="updateBoard" parameterType="java.util.HashMap">
    	UPDATE board
    	SET title = #{title},
    	    content = #{content},
    	    modify_datetime = NOW()
    	WHERE id = #{id}
    </update>
    <delete id="deleteBoard" parameterType="String">
    	DELETE FROM board
    	WHERE id = #{id}
    </delete>
  	<select id="selectBoardList" resultType="Board">
        SELECT id,
               title,
               content, 
               writer,
               views,
               date_format(regist_datetime, '%Y-%m-%d %H:%i:%s') regist_datetime,
               date_format(modify_datetime, '%Y-%m-%d %H:%i:%s') modify_datetime
  		FROM board
  		ORDER BY id
  	</select>
  	<update id="updateBoardViews" parameterType="String">
  		UPDATE board
  		SET views = views + 1
  		WHERE id = #{id}
  	</update>
</mapper>